import sqlite3
import tkinter as tk

conn = sqlite3.connect('people_database.db')
cursor = conn.cursor()
cursor.execute('''
CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT,
    age INTEGER
)
''')
conn.commit()
def func1():
    namep = entry1.get()
    agep = entry2.get()
    if namep and agep:
        cursor.execute("INSERT INTO users (name, age) VALUES (?, ?)",(namep,agep)) 
        conn.commit()
        entry1.delete(0, tk.END)
        entry2.delete(0, tk.END)

def func2():
    name1 = entry11.get()
    age1 = entry21.get()
    name2 = entry12.get()
    age2 = entry22.get()
    cursor.execute("UPDATE users SET age = ?, name = ? WHERE age = ? AND name = ?", (age2, name2, age1, name1))
    conn.commit()
    entry11.delete(0, tk.END)
    entry21.delete(0, tk.END)
    entry12.delete(0, tk.END)
    entry22.delete(0, tk.END)

def func3():
    namep = entry0.get()
    agep = entry02.get()
    cursor.execute("DELETE FROM users WHERE age = ? AND name = ?",(agep, namep))
    conn.commit()
    entry0.delete(0, tk.END)
    entry02.delete(0, tk.END)
def func4():
    cursor.execute("SELECT name, age FROM users")
    a = cursor.fetchall()
    t = "\n".join([f"{r[0]} {r[1]}" for r in a])
    label.config(text=t)

root = tk.Tk()
root.title("Робота з базами данних")
root.geometry("600x600")
entry1 = tk.Entry(root, text="ім'я користувача",)
entry1.pack(pady=10)
entry2 = tk.Entry(root, text="вік користувача")
entry2.pack(pady=10)
button1 = tk.Button(root, text="додати користувача", command=func1)
button1.pack(pady=10)
entry11 = tk.Entry(root, text="старе ім'я користувача")
entry11.pack(pady=10)
entry21 = tk.Entry(root, text="старий вік користувача")
entry21.pack(pady=10)
entry12 = tk.Entry(root, text="нове ім'я користувача")
entry12.pack(pady=10)
entry22 = tk.Entry(root, text="новий вік користувача")
entry22.pack(pady=10)
button2 = tk.Button(root, text="змінити користувача", command=func2)
button2.pack(pady=10)
entry0 = tk.Entry(root, text="видалений ім'я користувача",)
entry0.pack(pady=10)
entry02 = tk.Entry(root, text="видалений вік користувача")
entry02.pack(pady=10)
button4 = tk.Button(root, text="видалити користувача", command=func3)
button4.pack(pady=10)
button4 = tk.Button(root, text="показати користувачів", command=func4)
button4.pack(pady=10)
label = tk.Label(root, text="")
label.pack(pady=10)
root.mainloop()
conn.close()




